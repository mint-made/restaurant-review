!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.UserList=t():e.UserList=t()}(window,(function(){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./",a(a.s=5)}([function(e){e.exports=JSON.parse('[{"restaurantName":"Chakalaka","address":"105a Oldham St, Manchester M4 1LW","lat":53.48386,"lng":-2.234092,"type":"African","website":"http://www.chakalakabar.com/","id":"64387d8cc664b858912450c7174984217b26495e","placeId":"ChIJ764lBdyxe0gRI5kTcohiRWU","markerColor":"purple","ratings":[{"stars":5,"comment":"Great place, delicious food, excellent service, and friendly staff."},{"stars":4,"comment":"Great cocktails, bar food reasonable, would have liked more meat options."},{"stars":5,"comment":"We canâ€™t wait to bring more people to experience a bit of South Africa."}]},{"restaurantName":"El Taquero","address":"42 Back Turner St, Manchester M4 1FR","lat":53.483812,"lng":-2.236965,"type":"Mexican","website":"https://www.eltaquero.co.uk/","id":"c6a81d02432c05674ee4f8e1318765ed00c64756","placeId":"ChIJOSESyLixe0gRtAKoOlqKF2k","markerColor":"purple","ratings":[{"stars":5,"comment":"This restaurant offers fantastic service as well as yummy meals."},{"stars":5,"comment":"Surf and turf tacos and the Mexican cheese and nachos starter was great."},{"stars":5,"comment":"Very friendly staff, good prices and a very cosy environment."}]},{"restaurantName":"Dough Pizza Kitchen","address":"77 High St, Manchester M4 1FS","lat":53.484431,"lng":-2.237636,"type":"Pizzaria","website":"http://doughpizzakitchen.co.uk","id":"7faea0ea18caf5ed1a9e2a9c8da8120e429fea3f","placeId":"ChIJdS4S6bixe0gRnMihMZhKkc4","markerColor":"purple","ratings":[{"stars":5,"comment":"Really nice decor, fast service tasty food and friendly staff."},{"stars":5,"comment":"And yeah, good ambience, music, location, and service too."},{"stars":4,"comment":"You are seated by a helpful waitress, handed a menu and order a beer."}]},{"restaurantName":"Pie and Ale","address":"Units 1 & 2 the Hive, 47 Lever St, Manchester M1 1FN","lat":53.483223,"lng":-2.233542,"type":"British","website":"https://pieandale.com","id":"c9bf286dc3a9a07a933addce982fe63f76244f8a","placeId":"ChIJwVOcxL6xe0gRjDcDEW18W0w","markerColor":"purple","ratings":[{"stars":5,"comment":"Very tasty, good price, friendly, if not a bit busy, staff."},{"stars":4,"comment":"Delish food, good service and nice drinks."},{"stars":2,"comment":"Looking amazing but didnt taste as nice as it looked"}]},{"restaurantName":"Mackie Mayor","address":"1 Eagle St, Manchester M4 5BU","lat":53.485461,"lng":-2.23487,"type":"Food Stalls","website":"http://mackiemayor.co.uk","id":"5ebf45ac748804203ec004290384aa1101438d6c","placeId":"ChIJE62nBrmxe0gRTOqPKbYl36c","markerColor":"purple","ratings":[{"stars":5,"comment":"Great place, lovely music, quick service, a variety of snacks, meals & drinks."},{"stars":5,"comment":"Anything from bao buns to tacos, to pizza, steak and fresh grilled fish."},{"stars":5,"comment":"Great atmosphere and food selection - fast service and good quality food."}]},{"restaurantName":"Almost Famous","address":"100-102 High St, Manchester M4 1HP","lat":53.484547,"lng":-2.236921,"type":"Burger","website":"http://almostfamousburgers.com","id":"817d89b32a75c311bd5c2d487372e4aeaed1f565","placeId":"ChIJiTIowLixe0gRnUo9Rs1T4wM","markerColor":"purple","ratings":[{"stars":1,"comment":"Food is served in little plastic baskets with cooking paper, no plates."},{"stars":3,"comment":"Tasty Burger, music was a little too loud to hear everyone at the table"},{"stars":1,"comment":"I was expecting a lot for the price and reputation. It was smaller than I\'d expected. Tasty. But just okay."}]},{"address":"20-26 Edge St, Manchester M4 1HN, United Kingdom","avgRating":"","id":"93e5b1cc53795eeaadaa9f9497030bd2e2d2d774","lat":53.484389,"lng":-2.236525,"placeId":"ChIJkQGDQbmxe0gRpIBe7ebHdFM","ratings":[],"restaurantName":"V Rev Places Nearby Template","type":"Vegan","markerColor":"purple","website":""}]')},function(e,t,a){var r=a(2);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};a(4)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"body,html{font-family:verdana,arial;font-size:15px;height:100%;margin:0;background-color:#8a8a8a}#fixed{position:fixed}#fixed,#tabs{width:100%;z-index:4}#tabs{display:none;height:40px;display:fixed;background-color:#d5d5d5}#tabs #map-tab,#tabs #review-tab{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;color:#000;background-color:#d5d5d5}#tabs .map-active{z-index:2;border-color:#3a3a3a;border-style:solid;border-width:0 3px 2px 0;cursor:default;box-shadow:22px 0 35px 5px rgba(0,0,0,.61);border-radius:0 0 10px 0;width:51%}#tabs .map-inactive{z-index:1;border:solid #3a3a3a;border-width:0 0 0 2px;cursor:pointer;box-shadow:none;width:49%}#tabs .review-active{z-index:2;border-color:#3a3a3a;border-style:solid;border-width:0 0 2px 3px;cursor:default;box-shadow:-22px 0 35px 5px rgba(0,0,0,.61);border-radius:0 0 0 10px;width:51%}#tabs .review-inactive{z-index:1;border:solid #3a3a3a;border-width:0 2px 0 0;cursor:pointer;box-shadow:none;width:49%}#container{height:95%;display:-webkit-box;display:flex;flex-wrap:wrap;position:absolute;height:auto;bottom:0;top:0;left:0;right:0;box-shadow:0 2px 12px #292929;-moz-box-shadow:0 2px 12px #292929;-webkit-box-shadow:0 2px 12px #292929}#container #map{flex-basis:0;-webkit-box-flex:2;flex-grow:2;border-radius:15px 0 0 15px;z-index:0}#container #sidebar{width:50px;z-index:3;background-color:#fff;flex-basis:0;-webkit-box-flex:1;flex-grow:1;border-left:1px solid #8a8a8a;border-radius:0 15px 15px 0;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:250px;max-width:350px}#container #sidebar #sidebar-header{border-bottom:3px solid #3a3a3a;border-radius:0 15px 0 0}#container #sidebar #sidebar-restaurants{overflow:auto;flex-basis:0;-webkit-box-flex:1;flex-grow:1;padding:0 10px}#container #sidebar #sidebar-restaurants h1{margin-top:5px;margin-bottom:10px;border-bottom:2px solid #8a8a8a;text-align:center}#container #sidebar #sidebar-restaurants .restaurant-listing{border-bottom:2px dotted #8a8a8a;text-align:center}#container #sidebar #sidebar-restaurants .restaurant-listing h3,#container #sidebar #sidebar-restaurants .restaurant-listing p{margin:0}#container #sidebar #sidebar-info-box #info-box-title{display:-webkit-box;display:flex;padding:0 10px;height:40px;line-height:40px;background-color:#d5d5d5;margin:0}#container #sidebar #sidebar-info-box #info-box-title h2{margin:0;flex-basis:0;-webkit-box-flex:4;flex-grow:4;text-align:center}#container #sidebar #sidebar-info-box #info-box-title .x-button{margin:auto 0;flex-basis:0;background-color:#555;border:2px solid #555}#container #sidebar #sidebar-info-box #info-box-title .x-button:hover{background-color:#d5d5d5;color:#555}#container #sidebar #sidebar-info-box .resturant-image-container{display:-webkit-box;display:flex;padding:10px 10px 0;-webkit-box-pack:center;justify-content:center}#container #sidebar #sidebar-info-box .resturant-image-container .resturant-image{border-radius:10px;width:99%}#container #sidebar #sidebar-info-box #sidebar-restaurant-info{padding:10px;text-align:center;height:84%}#container #sidebar #sidebar-info-box #sidebar-restaurant-info p{margin:0}#container #sidebar #sidebar-info-box #sidebar-restaurant-info h3{border-top:2px dotted #8a8a8a;margin:10px 0;padding-top:10px;text-decoration:underline}#container #sidebar #sidebar-info-box #sidebar-restaurant-info .review{padding-bottom:5px}#container #sidebar #sidebar-info-box #sidebar-restaurant-info #add-review-container{border:1px solid #8a8a8a;border-radius:5px;height:100%}#container #sidebar #sidebar-info-box #sidebar-restaurant-info #add-review-container h2{margin:10px 0}#container #sidebar #sidebar-info-box #sidebar-restaurant-info #add-review-container p{margin-bottom:10px}#container #sidebar #sidebar-info-box #sidebar-restaurant-info #add-review-container #review-comment{width:90%}#container #sidebar #sidebar-info-box #sidebar-restaurant-info #add-review-container #review-stars{width:40%}#container #sidebar #sidebar-footer{border-top:3px solid #3a3a3a;border-radius:0 0 15px 0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#container #sidebar #sidebar-footer #add-restaurant-btn{margin:5px;line-height:1;background-color:#2196f3;border-color:#2196f3}#container #sidebar #sidebar-footer #add-restaurant-btn:hover{background-color:#d5d5d5;color:#2196f3}.py-10{padding:10px 0}.sidebar-title{height:40px;line-height:40px;text-align:center;background-color:#d5d5d5;margin:0}.active-sidebar-component{overflow:auto;flex-basis:0;-webkit-box-flex:3;flex-grow:3;padding:0;border-top:3px solid #8a8a8a;box-shadow:2px 2px 12px #292929;-moz-box-shadow:2px 2px 12px #292929;-webkit-box-shadow:2px 2px 12px #292929}.btn,.btn-add-review,.btn-external,.btn-reviews{display:inline-block;padding:4px 8px;color:#fff;background-color:#555;border:2px solid #555;border-radius:5px;cursor:pointer;text-align:center;text-decoration:none;font-weight:700;font-size:15px}.btn-add-review:hover,.btn-external:hover,.btn-reviews:hover,.btn:hover{background-color:#fff;color:#000}.btn-external{background-color:#9099a2;border:2px solid #9099a2;height:17px}.btn-external:hover{background-color:#fff;color:#555}.btn-add-review{background-color:#96858f;border:2px solid #96858f}.btn-add-review:hover{background-color:#fff;color:#96858f}.btn-reviews{background-color:#6d7993;border:2px solid #6d7993}.btn-reviews:hover{background-color:#fff;color:#6d7993}#map .map-control{display:block}#legend{display:none;background-color:#fff;border:1px solid #8a8a8a;box-shadow:0 2px 2px rgba(33,33,33,.4);margin:10px;width:150px;height:175px;border-radius:15px}#legend #marker-toggle-container{text-align:center}#legend .map-control{border-bottom:1px solid #8a8a8a;padding:5px}#legend .map-control h3{text-align:center;margin:2px}#legend #search-container{border-bottom:1px solid #8a8a8a}#legend #search-container form.example input[type=text]{padding:11px;font-size:15px;width:85px;border-radius:0;border:none}#legend #search-container form.example button{width:40px;padding:10px;background:#2196f3;color:#fff;font-size:17px;border:none;margin:none;cursor:pointer}#legend #search-container form.example button:hover{background:#0b7dda}#legend #rating-filter-container h3{margin:5px 0;text-align:center}#legend #rating-filter-container .center{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}#legend #rating-filter-container .center h3{padding-right:5px}#legend #rating-filter-container .center #bstar-5 #astar-5{margin-right:5px}#legend #rating-filter-container .center .checked{color:orange}#legend #rating-filter-container .center .fa{font-size:20px;cursor:pointer}#legend #rating-filter-container .above .fa:hover{color:orange}#legend #rating-filter-container .below .fa:hover{color:#000}#legend #add-restaurant{margin:5px;line-height:1;background-color:#96858f;border-color:#96858f}#legend #add-restaurant:hover{background-color:#d5d5d5;color:#96858f}#add-restaurant{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;margin:10px}#add-restaurant p{margin:0}#add-restaurant #add-restaurant-map{width:186px;height:186px;border:1px solid #8a8a8a;border-radius:15px;margin:7px 0}#add-restaurant .lat-lng{width:188px;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.form-width{width:170px;margin-bottom:5px}.form-half-width{width:70px;margin-bottom:5px}.form-textarea{padding:5px 8px;height:30px}@media screen and (min-width:50px) and (max-width:576px){#fixed{display:fixed}#tabs{display:-webkit-box;display:flex}#container{margin:40px 0 0;box-shadow:none}#container #sidebar #sidebar-header{display:none}#container #map,#container #sidebar{border-radius:0;border-top:1px solid #3a3a3a}#container #sidebar{max-width:600px}#container #sidebar #sidebar-footer,#container #sidebar #sidebar-header{border-radius:0}}@media screen and (min-width:576px) and (max-width:750px){#tabs{position:fixed}#container #map{display:block}#container{margin:0;border-radius:0;box-shadow:0 2px 12px #292929}#container #legend{display:block}#container #map,#container #sidebar #sidebar-footer,#container #sidebar #sidebar-header{border-radius:0}}@media screen and (min-width:750px){#tabs{display:none}#container{border-radius:15px 15px 15px 15px;margin:15px}#container #legend{display:block}}",""])},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(d," */")),n=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")}));return[a].concat(n).concat([i]).join("\n")}var o,s,d;return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(a,"}"):a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var n=this[i][0];null!=n&&(r[n]=!0)}for(var o=0;o<e.length;o++){var s=e[o];null!=s[0]&&r[s[0]]||(a&&!s[2]?s[2]=a:a&&(s[2]="(".concat(s[2],") and (").concat(a,")")),t.push(s))}},t}},function(e,t,a){"use strict";var r,i={},n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}();function s(e,t){for(var a=[],r={},i=0;i<e.length;i++){var n=e[i],o=t.base?n[0]+t.base:n[0],s={css:n[1],media:n[2],sourceMap:n[3]};r[o]?r[o].parts.push(s):a.push(r[o]={id:o,parts:[s]})}return a}function d(e,t){for(var a=0;a<e.length;a++){var r=e[a],n=i[r.id],o=0;if(n){for(n.refs++;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(h(r.parts[o],t))}else{for(var s=[];o<r.parts.length;o++)s.push(h(r.parts[o],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function l(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=a.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(a){t.setAttribute(a,e.attributes[a])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,p=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,a,r){var i=a?"":r.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var n=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(n,o[t]):e.appendChild(n)}}function b(e,t,a){var r=a.css,i=a.media,n=a.sourceMap;if(i&&e.setAttribute("media",i),n&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,m=0;function h(e,t){var a,r,i;if(t.singleton){var n=m++;a=f||(f=l(t)),r=u.bind(null,a,n,!1),i=u.bind(null,a,n,!0)}else a=l(t),r=b.bind(null,a,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=n());var a=s(e,t);return d(a,t),function(e){for(var r=[],n=0;n<a.length;n++){var o=a[n],l=i[o.id];l&&(l.refs--,r.push(l))}e&&d(s(e,t),t);for(var c=0;c<r.length;c++){var p=r[c];if(0===p.refs){for(var u=0;u<p.parts.length;u++)p.parts[u]();delete i[p.id]}}}}},function(e,t,a){"use strict";a.r(t);a(1);function r(e,t){const a=t.find(t=>t.restaurantName===e);let r=0;return a.ratings.forEach(e=>{r+=e.stars}),(r/a.ratings.length).toFixed(1)}class i{constructor(){this.APIKey="AIzaSyBYnKM88MomSm_Y5OI57p8-h7x1m8C_bWQ",this.baseURL={streetViewStatic:"https://maps.googleapis.com/maps/api/streetview?",placesNearbySearch:"https://maps.googleapis.com/maps/api/place/nearbysearch/json?",placesDetails:""}}streetViewStaticURL(e,t,a="250x200"){const r=`location=${e},${t}&size=${a}&key=${this.APIKey}`;return this.baseURL.streetViewStatic+r}}class n{constructor(){this.API=new i,this.data=""}init(e,t){this.data=t;const a=t.find(t=>t.id===e),r=document.querySelector("#sidebar-info-box");r.classList.add("active-sidebar-component"),r.innerHTML=`\n\n        <div id="info-box-title">\n            <h2 id="info-box-restaurant-name">${a.restaurantName}</h2>\n            <button class="btn x-button">&#10006;</button>\n        </div>\n        <div class="resturant-image-container">\n            <img class="resturant-image" src="${this.API.streetViewStaticURL(a.lat,a.lng)}">\n        </div>\n        <div id="sidebar-restaurant-info">\n            <p>\n                <b>Address:</b> ${a.address}\n            </p>\n            <p>\n                <b>Average Rating:</b> ${a.avgRating}\n            </p>\n            <button class="btn-add-review">Add Review</button>\n            <a class="btn-external" href="${a.website}" target="_blank">Website</a>\n            <div id="info-box-reviews">\n                <h3>User Reviews</h3>\n\n            </div>\n        </div>`;const i=document.querySelector("#info-box-reviews");a.ratings.forEach(e=>{const t=document.createElement("div");t.setAttribute("class","review"),t.innerHTML=`\n            <p><b>Review: </b>${e.comment}</p>\n            <p><b>Rating: </b>${e.stars}</p>`,i.appendChild(t)}),document.querySelector(".x-button").addEventListener("click",()=>{this.clear()}),document.querySelector(".btn-add-review").addEventListener("click",()=>{this.addReviewForm(a)})}clear(){const e=document.querySelector("#sidebar-info-box");e.innerHTML="",e.classList.remove("active-sidebar-component")}addReviewForm(e){document.querySelector("#sidebar-restaurant-info").innerHTML='\n        \n        <div id="add-review-container">\n            <h2>Leave a Review</h2>\n            <div id="review-form">\n                <form id="login-form" novalidate>\n                    <p>\n                        <div>\n                            <b>Rating (1-5): </b>\n                        </div>\n                        <select id="review-stars">\n                            <option value="1">1 star</option>\n                            <option value="2">2 star</option>\n                            <option value="3">3 star</option>\n                            <option value="4">4 star</option>\n                            <option value="5">5 star</option>\n                        </select>\n                    </p>\n                    <p>\n                        <div>\n                            <b>Comment: </b>\n                        </div>\n                        <textarea type="text" class="form-textarea" rows="3" id="review-comment" placeholder="Best food ever!"></textarea>\n                    </p>\n                    <input type="submit" value="Submit Review" id="btn-submit-review" class="btn">\n                </form>\n            </div>\n        </div>';const t=document.querySelector("#info-box-restaurant-name"),a=document.querySelector("#review-stars"),r=document.querySelector("#review-comment");document.querySelector("#btn-submit-review").addEventListener("click",()=>{event.preventDefault();const i={restaurantName:t.textContent,ratings:{stars:parseInt(a.value,10),comment:r.value}};this.submitReview(i,e)})}submitReview(e,t){t.ratings.push(e.ratings),t.avgRating=r(t.restaurantName,this.data),document.querySelector(`#rating-${t.id}`).innerHTML=`Rating: ${t.avgRating}`,this.clear(),console.log(`user submitted a review for ${t.restaurantName}. User review: ${e}`)}addRestaurant(){const e=document.querySelector("#sidebar-info-box");e.classList.add("active-sidebar-component"),e.innerHTML='\n        <div id="info-box-title">\n            <h2 id="info-box-restaurant-name">Add Restaurant</h2>\n            <button class="btn x-button">&#10006;</button>\n        </div>\n\n            <div id="add-restaurant">\n                <form id="login-form" novalidate>\n                    <p><b>Restaurant Name</b></p>\n                    <p><input type="text" class="form-width" id="add-new-name" placeholder="Burger King"></p>\n                    \n                    <p><b>Address: </b></p>\n                    <p><textarea type="text" class="form-width form-textarea" rows="3" cols="25" id="add-new-address" placeholder="Best food ever!"></textarea></p>\n                    \n                    <p><b>Average Rating (1-5): </b></p>\n                    <p>\n                        <select id="add-new-rating" class="form-width">\n                            <option value="1">1 star</option>\n                            <option value="2">2 star</option>\n                            <option value="3">3 star</option>\n                            <option value="4">4 star</option>\n                            <option value="5">5 star</option>\n                        </select>\n                    </p>\n                    \n                    <p><b>Latitude & Longitude</b></p>\n                    <div id="add-restaurant-map"></div>\n                    <p class="lat-lng">\n                        <input type="number" class="form-half-width" id="add-new-lat" placeholder="53.483">\n                        <input type="number" class="form-half-width" id="add-new-lng" placeholder="-2.236">\n                    </p>\n                    \n                    \n                    <input type="submit" value="Submit Restaurant" id="btn-submit-restaurant" class="btn">\n                </form>\n            </div>\n        \n        '}}class o{constructor(){this.InfoBox=new n,this.API=new i,this.data=""}init(e){this.data=e;const t=document.querySelector("#sidebar-restaurants");t.innerHTML="",this.data.forEach(a=>{a.ratings.length>0&&(a.avgRating=r(a.restaurantName,e));let i=document.createElement("div");i.setAttribute("class","restaurant-listing py-10"),i.innerHTML=`\n            <h3>${a.restaurantName}</h3>\n            <p>${a.address}</p>\n            <p id="rating-${a.id}">Rating: ${a.avgRating}</p>\n            <button id="${a.id}" class="btn-reviews">More Info</button>`,t.appendChild(i)})}clearInfoBox(){this.InfoBox.clear()}addInfoBox(e,t=this.data){this.InfoBox.init(e,t)}clearRestaurants(){document.querySelector("#sidebar-restaurants").innerHTML=""}addRestaurant(){this.InfoBox.addRestaurant()}}const s=a(0);(new class{constructor(){this.pos={lat:53.483456,lng:-2.235992},this.service="",this.data=[],this.filteredData=[],this.userSubmittedData=[],this.markers=[],this.Sidebar=new o,this.sidebarMapMarker="",this.mobile=!1,this.filter={min:0,max:5}}initMap(e){this.data=e;const t=new google.maps.Map(document.querySelector("#map"),{center:this.pos,zoom:17,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1});this.service=new google.maps.places.PlacesService(t),this.mediaQuery(t),this.initLegend(t),this.initGeolocation(t),this.initTogglePoi(t),this.Sidebar.init(e),this.initFilter(t),this.generateMarkers(t,e,this.pos,"purple"),this.btnReviewsListener(e),this.initLocationSearch(t),this.initAddRestaurant(t),this.initMapListeners(t),console.log("map initialised")}updateMarkersMapSidebar(e,t,a,r=this.filter){this.pos=a,e.setCenter(a),this.userSubmittedData.forEach(e=>this.data.push(e)),this.filterResults(e,t,r),this.clearMarkers(),this.generateMarkers(e,this.filteredData),this.Sidebar.clearRestaurants(),this.Sidebar.clearInfoBox(),this.Sidebar.init(this.filteredData),this.btnReviewsListener(this.filteredData)}initLocationSearch(e){const t=document.querySelector("#search-form");document.querySelector("#search-btn").addEventListener("click",()=>{event.preventDefault();const a=t.value;this.placesAPIQueryRequest(a).then(t=>{const a={lat:t[0].geometry.location.lat(),lng:t[0].geometry.location.lng()};this.placesAPINearbyRequest(a).then(t=>{this.data=this.modifyPlacesNearbyDataFormat(t),console.log("location search by user - places query returned:",a,"with Places Nearby Request made giving this data:",this.data),this.updateMarkersMapSidebar(e,this.data,a)})})})}initAddRestaurant(e){document.querySelector("#add-restaurant-btn").addEventListener("click",()=>{this.Sidebar.clearInfoBox(),this.Sidebar.addRestaurant();const t=new google.maps.Map(document.querySelector("#add-restaurant-map"),{center:this.pos,zoom:14,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,draggableCursor:"url(http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_purple.png), auto",styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{visibility:"off"}]}]});t.addListener("click",e=>{this.sidebarMapMarker&&this.sidebarMapMarker.setMap(null),this.sidebarMapMarker=new google.maps.Marker({position:e.latLng,map:t,icon:"./assets/red/pink-pin.png"}),t.panTo(e.latLng),document.querySelector("#add-new-lat").value=e.latLng.lat(),document.querySelector("#add-new-lng").value=e.latLng.lng()}),this.newRestaurantListener(e)})}initGeolocation(e){const t=new google.maps.InfoWindow;navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{var r={lat:a.coords.latitude,lng:a.coords.longitude};t.setPosition(r),t.setContent("Location found."),t.open(e),this.pos=r,this.placesAPINearbyRequest(this.pos).then(t=>{this.data=this.modifyPlacesNearbyDataFormat(t),console.log("New locaton from Geolocation:",this.pos,"So a Places Nearby Request was made:",this.data),this.updateMarkersMapSidebar(e,this.data,this.pos)})},()=>{console.log("Geolocation failed"),a(!0,t,e.getCenter())}):(console.log("Browser doesn't supoprt Geolocation"),a(!1,t,e.getCenter()));const a=(t,a,r)=>{a.setPosition(r),a.setContent(t?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),a.open(e)}}initTogglePoi(e){document.getElementById("hide-poi").addEventListener("click",(function(){e.setOptions({styles:t.hide})})),document.getElementById("show-poi").addEventListener("click",(function(){e.setOptions({styles:t.default})}));const t={default:"default",hide:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",stylers:[{visibility:"off"}]}]}}initFilter(e){const t=[],a=[];for(let e=0;e<5;e++)t[e]=document.querySelector(`#astar-${e+1}`),a[e]=document.querySelector(`#bstar-${e+1}`);t.forEach(a=>{a.addEventListener("click",()=>{if(event.preventDefault(),Number.parseInt(event.currentTarget.attributes.value.nodeValue)>this.filter.max)console.log("*Incorrect input*: User min value > max value");else{this.filter.min=Number.parseInt(event.currentTarget.attributes.value.nodeValue);for(let e=0;e<5;e++)e<this.filter.min?t[e].classList.add("checked"):t[e].classList.remove("checked");console.log(`User filtered results with min:${this.filter.min} / max:${this.filter.max} rating`),this.updateMarkersMapSidebar(e,this.data,this.pos)}})}),a.forEach(t=>{t.addEventListener("click",()=>{if(event.preventDefault(),Number.parseInt(event.currentTarget.attributes.value.nodeValue)<this.filter.min)console.log("*Incorrect input*: User max value < min value");else{this.filter.max=Number.parseInt(event.currentTarget.attributes.value.nodeValue);for(let e=0;e<5;e++)e<this.filter.max?a[e].classList.add("checked"):a[e].classList.remove("checked");console.log(`User filtered with min:${this.filter.min} / max:${this.filter.max} rating`),this.updateMarkersMapSidebar(e,this.data,this.pos)}})})}initMapListeners(e){e.addListener("dragend",()=>{this.pos.lat=e.getCenter().lat(),this.pos.lng=e.getCenter().lng(),this.placesAPINearbyRequest(this.pos).then(t=>{this.data=this.modifyPlacesNearbyDataFormat(t),this.updateMarkersMapSidebar(e,this.data,this.pos)})})}initLegend(e){document.querySelector("#legend").innerHTML='\n            <div id="style-selector-control" class="map-control">\n                <h3>Toggle Google Markers</h3>\n                <div id="marker-toggle-container">\n                    <input type="radio" name="show-hide" id="hide-poi" class="selector-control">\n                    <label for="hide-poi">Hide</label>\n                    <input type="radio" name="show-hide" id="show-poi" class="selector-control" checked="checked">\n                    <label for="show-poi">Show</label>\n                </div>\n            </div>\n            <div id="search-container">\n                <form class="example">\n                    <input id="search-form" type="text" placeholder="Location..." name="search">\n                    <button id="search-btn" type="submit"><i class="fa fa-search"></i></button>\n                </form>\n            </div>\n            <div id="rating-filter-container">\n                <h3>Display with raings:</h3>\n                <div class="center above">\n                    <h3>Min:</h3>\n                    <span id="astar-1" value="1" class="fa fa-star"></span>\n                    <span id="astar-2" value="2" class="fa fa-star"></span>\n                    <span id="astar-3" value="3" class="fa fa-star"></span>\n                    <span id="astar-4" value="4" class="fa fa-star"></span>\n                    <span id="astar-5" value="5" class="fa fa-star"></span>\n                </div>\n                <div class="center below">\n                    <h3>Max:</h3>\n                    <span id="bstar-1" value="1" class="fa fa-star checked"></span>\n                    <span id="bstar-2" value="2" class="fa fa-star checked"></span>\n                    <span id="bstar-3" value="3" class="fa fa-star checked"></span>\n                    <span id="bstar-4" value="4" class="fa fa-star checked"></span>\n                    <span id="bstar-5" value="5" class="fa fa-star checked"></span>\n                </div>\n            </div>',e.controls[google.maps.ControlPosition.LEFT_TOP].push(document.querySelector("#legend"))}filterResults(e,t,a=this.filter){this.filteredData=t.filter(e=>e.avgRating>=a.min),this.filteredData=this.filteredData.filter(e=>e.avgRating<=a.max)}generateMarkers(e,t=this.data,a=this.pos,r="red"){t.forEach(a=>{let r=new google.maps.Marker({position:{lat:a.lat,lng:a.lng},map:e,icon:`./assets/${a.markerColor}/restaurant.png`,mydata:a.id});r.addListener("click",a=>{const i=t.find(e=>e.id===r.mydata);this.getReviewInfoBox(i),e.panTo(a.latLng)});let i=`\n            <div>\n                <h3 style="margin:0;">${a.restaurantName}</h3>\n            </div>`,n=new google.maps.InfoWindow({content:i});r.addListener("mouseover",()=>{n.open(e,r)}),r.addListener("mouseout",()=>{n.close(e,r)}),this.markers.push(r)});let i=new google.maps.Marker({position:{lat:a.lat,lng:a.lng},map:e,icon:"./assets/red/arrow.png"});this.markers.push(i)}clearMarkers(){this.markers.forEach(e=>{e.setMap(null)})}getReviewInfoBox(e){this.mobile&&this.reviewTabClicked(map),this.Sidebar.clearInfoBox(),e.ratings.length>0?this.Sidebar.addInfoBox(e.id):this.placesAPIDetailsRequest(e.placeId).then(t=>{this.modifyPlacesDetailsDataFormat(t,e),console.log("No reviews in data, so a Places API Request was made",e,this.data),this.Sidebar.addInfoBox(e.id,this.data)})}btnReviewsListener(e=this.data){document.querySelectorAll(".btn-reviews").forEach(t=>{t.addEventListener("click",()=>{const t=e.find(e=>e.id===event.currentTarget.id);this.getReviewInfoBox(t)})})}newRestaurantListener(e){const t=document.querySelector("#add-new-name"),a=document.querySelector("#add-new-address"),r=document.querySelector("#add-new-rating"),i=document.querySelector("#add-new-lat"),n=document.querySelector("#add-new-lng");document.querySelector(".x-button").addEventListener("click",()=>{this.Sidebar.clearInfoBox()}),document.querySelector("#btn-submit-restaurant").addEventListener("click",()=>{event.preventDefault();const o={restaurantName:t.value,address:a.value,lat:parseFloat(i.value,10),lng:parseFloat(n.value,10),avgRating:parseFloat(r.value,10),ratings:[{stars:parseFloat(r.value,10),comment:"ok"}],placeId:"",website:"",markerColor:"mint",id:Date.now().toString()};console.log("New Restaurant added with the following data:",o),this.userSubmittedData.push(o),this.updateMarkersMapSidebar(e,this.data,this.pos)})}placesAPINearbyRequest(e){const t={location:e,radius:500,type:"restaurant",rankby:"distance"};return new Promise((e,a)=>{this.service.nearbySearch(t,(function(t,r){r===google.maps.places.PlacesServiceStatus.OK?e(t):a(r)}))})}placesAPIDetailsRequest(e){const t={placeId:e,fields:["name","rating","website","price_level","review","user_ratings_total"]};return new Promise((e,a)=>{this.service.getDetails(t,(function(t,r){r===google.maps.places.PlacesServiceStatus.OK?e(t):a(r)}))})}placesAPIQueryRequest(e){const t={query:e,fields:["name","geometry"]};return new Promise((e,a)=>{this.service.findPlaceFromQuery(t,(function(t,r){r===google.maps.places.PlacesServiceStatus.OK?e(t):a(r)}))})}modifyPlacesDetailsDataFormat(e,t){this.data.forEach(a=>{a.id===t.id&&(a.website=e.website,a.priceLevel=e.price_level,e.reviews?e.reviews.forEach(e=>{let t={stars:e.rating,comment:e.text};a.ratings.push(t)}):console.log("Places API Details Request - contained no reviews"))})}modifyPlacesNearbyDataFormat(e){let t=[];return console.log("data received",e[0]),e.forEach(e=>{let a={address:e.vicinity,avgRating:e.rating,id:e.place_id,lat:e.geometry.location.lat(),lng:e.geometry.location.lng(),placeId:e.place_id,ratings:[],restaurantName:e.name,type:e.types,website:"",markerColor:"red"};t.push(a)}),console.log("data returned",t[0]),t}initMobileViewport(e){this.mobile=!0,console.log("Mobile viewport initialised"),this.mobile=!0,document.querySelector("#sidebar").style.display="none",document.querySelector("#map-tab").addEventListener("click",()=>{this.mapTabClicked(e)}),document.querySelector("#review-tab").addEventListener("click",()=>{this.reviewTabClicked(e)})}reviewTabClicked(e){document.querySelector("#map").style.display="none",document.querySelector("#sidebar").style.display="flex",document.querySelector("#map-tab").classList.add("map-inactive"),document.querySelector("#map-tab").classList.remove("map-active"),document.querySelector("#review-tab").classList.add("review-active"),document.querySelector("#review-tab").classList.remove("review-inactive")}mapTabClicked(e){document.querySelector("#map").style.display="flex",document.querySelector("#sidebar").style.display="none",document.querySelector("#map-tab").classList.add("map-active"),document.querySelector("#map-tab").classList.remove("map-inactive"),document.querySelector("#review-tab").classList.add("review-inactive"),document.querySelector("#review-tab").classList.remove("review-active")}initDesktopViewport(e){this.mobile=!1,console.log("Desktop viewport initialised"),this.mobile=!1,document.querySelector("#sidebar").style.display="flex",document.querySelector("#map").style.display="flex"}mediaQuery(e){let t=window.matchMedia("(max-width: 568px)");t.addEventListener("change",e=>{e.matches?this.initMobileViewport():this.initDesktopViewport()}),t.matches?this.initMobileViewport(e):this.initDesktopViewport(e)}}).initMap(s)}]).default}));
//# sourceMappingURL=index.js.map